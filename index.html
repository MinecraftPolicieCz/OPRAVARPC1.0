<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <title>Opravář PC</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            overflow: hidden;
            height: 100vh;
            background-color: #0000AA;
            color: #FFFFFF;
            font-family: 'Courier New', Courier, monospace;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            line-height: 1.5;
            text-shadow: 0 0 5px rgba(255,255,255,0.5);
            -webkit-font-smoothing: antialiased;
        }
        /* Hlavní kontejner */
        #game-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 80%;
            height: 80%;
        }
        /* Seznam úkolů nahoře */
        #taskbar-tasks {
            display: flex;
            gap: 9px;
            margin: 8px 0 15px 0;
            justify-content: center;
            flex-wrap: wrap;
        }
        .taskbar-task {
            padding: 4px 18px;
            border: 2px solid #FFFF00;
            background: #001B70;
            color: #FFFF00;
            border-radius: 6px;
            font-size: 1.07em;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.16s, color 0.13s;
        }
        .taskbar-task.active {
            background: #FFFF00;
            color: #002288;
            border-color: #fff;
        }
        .taskbar-task.done {
            background: #008800;
            color: #fff;
            border-color: #00ff90;
        }
        /* Retro konzole modal */
        #console-modal {
            display: none;
            position: fixed;
            left: 0; right: 0; top: 0; bottom: 0;
            background: rgba(0,0,0,0.25);
            z-index: 4000;
            align-items: center;
            justify-content: center;
        }
        #console-window {
            background: #111;
            border: 3px solid #fff;
            border-radius: 13px;
            width: 600px; max-width: 96vw;
            min-height: 260px;
            box-shadow: 0 0 50px #000a;
            color: #00FF00;
            font-family: 'Courier New', monospace;
            display: flex; flex-direction: column;
            animation: glitch 10s infinite;
        }
        #console-header {
            background: #222;
            color: #fff;
            padding: 7px 14px;
            border-radius: 10px 10px 0 0;
            font-weight: bold;
            display: flex; justify-content: space-between; align-items: center;
            user-select: none;
        }
        #console-close {
            font-size: 1.5em;
            cursor: pointer;
            color: #fff;
            background: #a00;
            border-radius: 5px;
            padding: 0 10px;
            margin-left: 15px;
            transition: background 0.14s;
        }
        #console-close:hover { background: #e22; }
        #console-body {
            background: #111;
            color: #00FF00;
            flex: 1;
            padding: 16px 12px 10px 18px;
            font-size: 1.15em;
            border-radius: 0 0 10px 10px;
        }
        #console {
            white-space: pre-wrap;
            min-height: 56px;
            font-size: 1.03em;
        }
        #input-line {
            display: flex;
            align-items: center;
            margin-top: 12px;
        }
        #prompt {
            padding-right: 7px;
            color: #FFFF00;
            font-weight: bold;
        }
        #input-field {
            background: none;
            border: none;
            color: #00FF00;
            font-family: inherit;
            font-size: 16px;
            outline: none;
            caret-color: #FFFF00;
            flex-grow: 1;
        }
        /* Retro posuvník hlasitosti vlevo dole */
        #volume-control {
            position: fixed;
            left: 22px;
            bottom: 30px;
            z-index: 5000;
            display: flex;
            align-items: center;
            gap: 8px;
            background: #222;
            border: 2px solid #fff;
            border-radius: 8px;
            padding: 4px 16px 4px 10px;
            box-shadow: 0 1px 4px #0094ff77;
            font-size: 1.15em;
        }
        #volume-slider {
            width: 96px;
            accent-color: #FFFF00;
        }
        .volume-icon {
            width: 24px;
            height: 24px;
            fill: #FFFF00;
            filter: drop-shadow(0 0 3px #ff0a);
        }
        /* Glitch animace */
        @keyframes glitch {
            0% { text-shadow: 0 0 5px rgba(255,255,255,0.5); }
            5% { text-shadow: 0 0 12px #fff, 2px 2px 0 red, -2px -2px 0 cyan; transform: scale(1.01);}
            10% { text-shadow: 0 0 5px rgba(255,255,255,0.5); transform: scale(1);}
            15% { transform: scale(1.01) skewX(2deg);}
            20% { transform: scale(1) skewX(0);}
            100% { text-shadow: 0 0 5px rgba(255,255,255,0.5);}
        }
        /* Info panely v rozích */
        #language-info, #creator-info {
            position: absolute;
            color: #888;
            font-size: 12px;
            text-align: right;
            right: 10px;
        }
        #language-info { bottom: 30px; }
        #creator-info { bottom: 10px; }
        /* Responsivita */
        @media (max-width:700px) {
            #console-window {width: 97vw;}
        }
    </style>
</head>
<body>
    <div id="game-container">
        <div style="font-size:2.15em;font-weight:bold;margin-top:1em;">OPRAVÁŘ PC 1.0</div>
        <div id="taskbar-tasks"></div>
        <div id="task-desc" style="background:#001040;color:#FFD700;border:2px solid #FFFF00;border-radius:7px;width:80vw;max-width:680px;min-height:55px;margin-bottom:18px;font-size:1.16em;padding:15px 18px 12px 18px;box-shadow:0 0 15px #00d0ff33 inset;">
            Vyber úkol a spusť plnění!
        </div>
    </div>
    <!-- Retro konzole modal -->
    <div id="console-modal">
      <div id="console-window">
        <div id="console-header">
          <span>Konzole (CMD)</span>
          <span id="console-close" onclick="closeConsole()">&times;</span>
        </div>
        <div id="console-body">
          <div id="console"></div>
          <div id="input-line">
            <span id="prompt">C:\></span>
            <input type="text" id="input-field" autocomplete="off" spellcheck="false">
          </div>
        </div>
      </div>
    </div>
    <!-- Retro hlasitost vlevo dole -->
    <div id="volume-control">
        <svg class="volume-icon" viewBox="0 0 24 24"><path d="M3 10v4h4l5 5V5L7 10H3zm13.5 2c0-1.77-1.02-3.29-2.5-4.03v2.06c.58.35 1 .98 1 1.74s-.42 1.39-1 1.74v2.06c1.48-.74 2.5-2.26 2.5-4.03z"></path></svg>
        <input type="range" id="volume-slider" min="0" max="1" step="0.01" value="1" />
    </div>
    <div id="language-info">
        <span id="lang-label">Jazyk</span>: <span id="current-lang">cs</span><br>
        <span id="change-lang-label">Změnit jazyk: SET_LANG</span> <span id="lang-list">[en|cs|pl|de|es]</span>
    </div>
    <div id="creator-info">
        Vytvořil MinecraftPolicieCz
    </div>
    <script>
    // Ukázkové úkoly
    const tasks = [
        {
            id: "VIRUS",
            title: "Odstranit virus",
            desc: "Systém je infikován virem! Spusť příkaz <b>SCAN_VIRUS</b>.",
            command: "SCAN_VIRUS",
            state: "active"
        },
        {
            id: "RAM",
            title: "Diagnostika RAM",
            desc: "Počítač hlásí chybu paměti. Použij příkaz <b>TEST_RAM</b>.",
            command: "TEST_RAM",
            state: "waiting"
        },
        {
            id: "RECOVERY",
            title: "Obnovit smazaná data",
            desc: "Obnov smazané soubory pomocí příkazu <b>RECOVER_FILES</b>.",
            command: "RECOVER_FILES",
            state: "waiting"
        }
    ];
    let activeTaskIndex = 0;
    let commandBuffer = "";

    // Vykresli taskbar
    function renderTaskbarTasks() {
        const bar = document.getElementById('taskbar-tasks');
        bar.innerHTML = "";
        tasks.forEach((task, idx) => {
            const d = document.createElement('div');
            d.className = "taskbar-task" +
                (idx === activeTaskIndex ? " active" : "") +
                (task.state === "done" ? " done" : "");
            d.textContent = task.title + (task.state === "done" ? " ✓" : "");
            d.onclick = ()=>{ switchToTask(idx); };
            bar.appendChild(d);
        });
    }
    // Detail a popis úkolu + spuštění konzole
    function renderTaskDetails() {
        const task = tasks[activeTaskIndex];
        document.getElementById('task-desc').innerHTML = task.desc +
            "<br><b>Stav:</b> " + (task.state === "done" ? "Splněno" : (task.state === "active" ? "Probíhá" : "Čeká na zahájení"));
        // Otevři konzoli pokud úkol je právě aktivní
        if (task.state === "active") openConsole();
        else closeConsole();
    }
    function switchToTask(idx) {
        activeTaskIndex = idx;
        // Pouze jeden úkol může být aktivní
        tasks.forEach((t,i)=>t.state = (i === idx && t.state!=="done") ? "active" : (t.state==="done"?"done":"waiting"));
        commandBuffer = "";
        renderTaskbarTasks();
        renderTaskDetails();
        document.getElementById('console').textContent = "";
        document.getElementById('input-field').value = "";
    }

    // Konzole: otevřít/zavřít
    function openConsole() {
        document.getElementById('console-modal').style.display = 'flex';
        setTimeout(()=>{document.getElementById('input-field').focus();},80);
    }
    function closeConsole() {
        document.getElementById('console-modal').style.display = 'none';
    }

    // Zpracování příkazů v konzoli
    document.getElementById('input-field').addEventListener('keydown', function(e){
        if (e.key === "Enter") {
            const val = this.value.trim();
            if (!val) return;
            commandBuffer += "\nC:\\> " + val;
            const task = tasks[activeTaskIndex];
            if (val.toUpperCase() === task.command) {
                commandBuffer += "\nOK: Úkol splněn!";
                task.state = "done";
                setTimeout(()=>{
                    renderTaskbarTasks();
                    renderTaskDetails();
                }, 600);
            } else {
                commandBuffer += "\nChybný příkaz! Zkus to znovu.";
            }
            document.getElementById('console').textContent = commandBuffer.trim();
            this.value = "";
        }
    });

    // Hlasitost globální proměnná
    window.audioVolume = 1;
    document.getElementById('volume-slider').addEventListener('input', function(){
        window.audioVolume = parseFloat(this.value);
        // Až bude hudba: music.volume = window.audioVolume;
    });

    // INIT
    function init() {
        // První úkol aktivní, ostatní čekají
        tasks.forEach((t,i)=>t.state = (i===0 ? "active" : "waiting"));
        activeTaskIndex = 0;
        commandBuffer = "";
        document.getElementById('console').textContent = "";
        document.getElementById('input-field').value = "";
        renderTaskbarTasks();
        renderTaskDetails();
    }
    window.onload = init;
    </script>
</body>
</html>